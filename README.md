# âœ¨ Onchain Horoscope

A playful Farcaster MiniApp that generates AI-powered "onchain horoscopes" based on your Base wallet activity using Reown AppKit.

![Onchain Horoscope](https://img.shields.io/badge/Built%20with-Reown%20AppKit-blue) ![Base Chain](https://img.shields.io/badge/Chain-Base-0052FF) ![AI Powered](https://img.shields.io/badge/AI-GPT--4-green)

## ğŸŒŸ Features

- ğŸ”— **Wallet Connection** via Reown AppKit (Base chain)
- ğŸŒˆ **Multi-Chain Support** - Analyzes activity across Ethereum + Base (expandable to Optimism, Zora, etc.)
- ğŸ¤– **AI-Powered Horoscopes** generated by GPT-4o-mini
- ğŸ“Š **Cross-Chain Analysis** - Compares your behavior across different chains
- ğŸ¨ **Beautiful UI** with Tailwind CSS + shadcn/ui
- âš¡ **Real-time Data** from Covalent API (multi-chain) or BaseScan (Base only)
- ğŸ­ **Onchain Zodiac Signs** based on your degen score
- ğŸ’« **Smooth Animations** with Framer Motion
- ğŸ† **Most Active Chain** detection and display

## ğŸš€ Quick Start

### Prerequisites

- Node.js 18+ or Bun
- pnpm (recommended) or npm

### Installation

```bash
# Clone the repository
git clone <your-repo-url>
cd onchain-horoscope

# Install dependencies
pnpm install
# or
npm install
```

### Environment Setup

Create a `.env.local` file in the root directory:

```bash
# Required: OpenAI API Key
OPENAI_API_KEY=sk-...

# Required: Reown Project ID (get from https://cloud.reown.com/)
NEXT_PUBLIC_REOWN_PROJECT_ID=...

# Choose ONE of these for blockchain data:
# Option 1: Covalent API Key (RECOMMENDED - supports multi-chain Ethereum + Base + more)
COVALENT_API_KEY=...

# Option 2: BaseScan API Key (Fallback - Base chain only)
BASESCAN_API_KEY=...
```

### Getting API Keys

1. **Reown Project ID**
   - Go to [https://cloud.reown.com/](https://cloud.reown.com/)
   - Create a new project
   - Copy your Project ID

2. **OpenAI API Key**
   - Go to [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)
   - Create a new API key

3. **Covalent API Key** (Recommended - Multi-chain support!)
   - Go to [https://www.covalenthq.com/](https://www.covalenthq.com/)
   - Sign up for a free API key
   - **Why Covalent?** It fetches data from Ethereum + Base (and more chains) in one go!

4. **BaseScan API Key** (Alternative - Base only)
   - Go to [https://basescan.org/apis](https://basescan.org/apis)
   - Sign up and get a free API key
   - Only supports Base chain, but still works great

### Run Development Server

```bash
pnpm dev
# or
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

## ğŸ“ Project Structure

```
/onchain-horoscope
â”œâ”€ /app
â”‚  â”œâ”€ /api
â”‚  â”‚  â””â”€ /generate-horoscope
â”‚  â”‚     â””â”€ route.ts          # GPT-4 horoscope generation API
â”‚  â”œâ”€ layout.tsx              # Root layout with providers
â”‚  â”œâ”€ providers.tsx           # Reown AppKit + Wagmi providers
â”‚  â”œâ”€ page.tsx                # Main UI page
â”‚  â””â”€ globals.css             # Global styles
â”œâ”€ /components
â”‚  â”œâ”€ /ui
â”‚  â”‚  â”œâ”€ button.tsx           # shadcn button component
â”‚  â”‚  â””â”€ card.tsx             # shadcn card component
â”‚  â”œâ”€ ConnectButton.tsx       # Reown wallet connect button
â”‚  â”œâ”€ HoroscopeCard.tsx       # Horoscope display card
â”‚  â””â”€ LoadingState.tsx        # Loading animation
â”œâ”€ /lib
â”‚  â”œâ”€ config.ts               # Reown AppKit configuration
â”‚  â”œâ”€ fetchWalletData.ts      # BaseScan/Covalent integration
â”‚  â”œâ”€ gpt.ts                  # OpenAI API calls
â”‚  â”œâ”€ zodiacLogic.ts          # Onchain zodiac mapping
â”‚  â””â”€ utils.ts                # Utility functions
â””â”€ package.json
```

## ğŸ¨ Tech Stack

- **Framework:** Next.js 14 (App Router)
- **Wallet:** Reown AppKit + Wagmi
- **Blockchain:** Multi-chain support (Ethereum + Base + more via viem)
- **AI:** OpenAI GPT-4o-mini (faster & cheaper than GPT-4)
- **Styling:** Tailwind CSS + shadcn/ui
- **Animations:** Framer Motion
- **Data:** Covalent API (multi-chain) or BaseScan API (Base only)
- **HTTP Client:** Axios

## ğŸ”§ How It Works

1. User connects their Base wallet via Reown AppKit
2. App fetches the last 10 transactions from **multiple chains** (Ethereum + Base)
3. Analyzes onchain activity across chains (swaps, mints, transfers)
4. Calculates a "degen score" (0-100) with bonus for multi-chain activity
5. Detects which chain the user is most active on
6. Sends multi-chain wallet data to GPT-4o-mini for horoscope generation
7. GPT compares behavior across chains (e.g., "Your Base moon shines while Ethereum sleeps")
8. Displays a funny, personalized onchain horoscope with chain badges
9. Users can share their horoscope on social media

## ğŸŒ™ Onchain Zodiac Signs

- ğŸ”¥ **DegenerateAries** (80-100): The eternal degen
- ğŸ’ **DiamondTaurus** (65-79): Diamond hands incarnate
- ğŸŒ™ **MoonboyGemini** (50-64): Airdrop chaser
- ğŸ¦€ **CrabCancer** (35-49): Sideways trader
- ğŸ¦ **LionLeo** (20-34): Proud hodler
- ğŸ“Š **ChartistVirgo** (10-19): Analysis paralysis
- ğŸŒ **SlowpokeLibra** (0-9): Just getting started

## ğŸš¢ Deployment

### Deploy to Vercel

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/yourusername/onchain-horoscope)

1. Push your code to GitHub
2. Import project to Vercel
3. Add environment variables in Vercel dashboard
4. Deploy!

### Environment Variables for Production

Make sure to add all the environment variables from `.env.local` to your deployment platform.

## ğŸ­ Customization

### Add More Chains

Edit `lib/fetchWalletData.ts` to add Optimism, Zora, Polygon, etc.:

```typescript
const chains = [
  { id: 1, name: 'Ethereum' },
  { id: 8453, name: 'Base' },
  { id: 10, name: 'Optimism' },      // Add Optimism
  { id: 7777777, name: 'Zora' },     // Add Zora
  { id: 137, name: 'Polygon' },      // Add Polygon
]
```

Covalent supports 100+ chains! See [Covalent docs](https://www.covalenthq.com/docs/networks/) for chain IDs.

### Change the AI Model

Edit `lib/gpt.ts`:

```typescript
const completion = await openai.chat.completions.create({
  model: 'gpt-4o', // or 'gpt-3.5-turbo' for cheaper
  // ...
})
```

### Adjust Zodiac Signs

Edit `lib/zodiacLogic.ts` to customize the zodiac signs and score ranges.

### Modify Horoscope Prompt

Edit `lib/gpt.ts` to change the GPT prompt and customize the horoscope style.

## ğŸ› Troubleshooting

### "No API key configured" error
- Make sure you've created `.env.local` with at least one blockchain API key (BaseScan or Covalent)

### Wallet not connecting
- Ensure `NEXT_PUBLIC_REOWN_PROJECT_ID` is set correctly
- Check browser console for errors
- Try clearing browser cache

### GPT-4 errors
- Verify your OpenAI API key has GPT-4 access
- Check OpenAI API usage limits
- Can switch to `gpt-3.5-turbo` in `lib/gpt.ts` if needed

## ğŸ“ License

MIT License - feel free to use this project for your own Farcaster MiniApps!

## ğŸ™ Credits

- Built with [Reown AppKit](https://docs.reown.com/)
- UI components from [shadcn/ui](https://ui.shadcn.com/)
- Powered by [OpenAI GPT-4](https://openai.com/)
- Base chain data from [BaseScan](https://basescan.org/) or [Covalent](https://www.covalenthq.com/)

## ğŸŒŸ Future Features

- [ ] Mint horoscope as NFT on Base
- [ ] Share directly to Farcaster
- [ ] Historical horoscope tracking
- [ ] Compatibility checker (compare two wallets)
- [ ] Horoscope leaderboard

---

**For entertainment purposes only. DYOR, anon.** ğŸŒ™âœ¨

